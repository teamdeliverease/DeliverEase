{
  "rules": {
    "volunteers": {
      "$uid": {
        ".validate": "newData.hasChildren(['firstName', 'lastName', 'name', 'email', 'address', 'phone', 'hasCar', 'termsAgreement', 'lat', 'lng', 'timestamp'])",
        "firstName": {
          ".validate": "((newData.isString() && newData.val().length > 0) && newData.val().length <= 64)"
        },
        "lastName": {
          ".validate": "((newData.isString() && newData.val().length > 0) && newData.val().length <= 64)"
        },
        "name": {
          ".validate": "((newData.isString() && newData.val().length > 0) && newData.val().length <= 128)"
        },
        "email": {
          ".validate": "(((newData.isString() && newData.val().length > 0) && newData.val().length <= 256) && newData.val().contains('@'))"
        },
        "address": {
          ".validate": "((newData.isString() && newData.val().length > 0) && newData.val().length <= 256)"
        },
        "phone": {
          ".validate": "((newData.isString() && newData.val().length > 0) && newData.val().length <= 15)"
        },
        "hasCar": {
          ".validate": "(newData.isBoolean() && newData.val() != null)"
        },
        "termsAgreement": {
          ".validate": "(newData.isBoolean() && newData.val() == true)"
        },
        "language": {
          "$key1": {
            ".validate": "newData.isString()"
          },
          ".validate": "(newData.hasChildren() && ((((newData.val().contains('English') || newData.val().contains('Spanish')) || newData.val().contains('Mandarin')) || newData.val().contains('Cantonese')) || newData.val().contains('Other')))"
        },
        "lat": {
          ".validate": "((newData.isNumber() && newData.val() >= -180) && newData.val() <= 180)"
        },
        "lng": {
          ".validate": "((newData.isNumber() && newData.val() >= -90) && newData.val() <= 90)"
        },
        "timestamp": {
          ".validate": "(newData.isNumber() && newData.val() == (data.val() == null ? now : data.val()))"
        },
        "$other": {
          ".validate": "false"
        },
        ".write": "true"
      }
    },
    "requesters": {
      "$uid": {
        ".validate": "newData.hasChildren(['firstName', 'lastName', 'name', 'address', 'phone', 'termsAgreement', 'list', 'lat', 'lng', 'timestamp', 'fulfillment_status', 'fulfillment_status_timestamp'])",
        "firstName": {
          ".validate": "((newData.isString() && newData.val().length > 0) && newData.val().length <= 64)"
        },
        "lastName": {
          ".validate": "((newData.isString() && newData.val().length > 0) && newData.val().length <= 64)"
        },
        "name": {
          ".validate": "((newData.isString() && newData.val().length > 0) && newData.val().length <= 128)"
        },
        "email": {
          ".validate": "(((newData.isString() && newData.val().length > 0) && newData.val().length <= 256) && newData.val().contains('@'))"
        },
        "address": {
          ".validate": "((newData.isString() && newData.val().length > 0) && newData.val().length <= 256)"
        },
        "phone": {
          ".validate": "((newData.isString() && newData.val().length > 0) && newData.val().length <= 15)"
        },
        "termsAgreement": {
          ".validate": "(newData.isBoolean() && newData.val() == true)"
        },
        "list": {
          ".validate": "((newData.isString() && newData.val().length > 0) && newData.val().length <= 1024)"
        },
        "lat": {
          ".validate": "((newData.isNumber() && newData.val() >= -180) && newData.val() <= 180)"
        },
        "lng": {
          ".validate": "((newData.isNumber() && newData.val() >= -90) && newData.val() <= 90)"
        },
        "language": {
          "$key1": {
            ".validate": "newData.isString()"
          },
          ".validate": "(newData.hasChildren() && ((((newData.val().contains('English') || newData.val().contains('Spanish')) || newData.val().contains('Mandarin')) || newData.val().contains('Cantonese')) || newData.val().contains('Other')))"
        },
        "timestamp": {
          ".validate": "(newData.isNumber() && newData.val() == (data.val() == null ? now : data.val()))"
        },
        "fulfillment_status": {
          ".validate": "(newData.isString() && ((((newData.val() == 'new' || newData.val() == 'sourcing_volunteer') || newData.val() == 'pending_fullfilment') || newData.val() == 'fulfilling') || newData.val() == 'complete'))"
        },
        "fulfillment_status_timestamp": {
          ".validate": "(newData.isNumber() && newData.val() == now)"
        },
        "$other": {
          ".validate": "false"
        },
        ".write": "true"
      }
    }
  }
}
